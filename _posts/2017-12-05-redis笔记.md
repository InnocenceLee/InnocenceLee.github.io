---
layout: post
title: redis
---
# redis笔记
    redis是一种nosql(not only sql)数据库，关于nosql数据库和关系型数据库的区别及应用场景这里不再赘述。

##redis小知识
  * 单进程模型:对读写等事件的响应是通过是通过对epoll函数的包装来做到的。
  * 默认16个数据库切片，下标从0开始，初始默认使用0号库，各个库之间相互隔离，可以使用move key db_index来完成key的移动。
  * dbsize查看当前库的所有key数量，flushdb清空当前库key，flushall清空所有库key。
  * 统一密码管理，即所有库都使用同一密码。
  * 相关key的操作：`keys *`用于查看当前库所有key值，`expire key seconds`用于设置key过期时间，`ttl key`查看key还有多少秒过期（-1永不过期， -2已过期），`type key`查看key的类型。
  
##String类型
  * redis的string类型是二进制安全的，即可以包含任何数据（比如图片或者序列化的对象）。一个字符串的value最多可以容纳521M数据
  * 相关操作：
  1. `set`设置值；`get`获取key对应值；`del`删除key；`append`追加key对应的value；`strlen`获取key对应value长度。
  2. `incr key`按1递增；`decr key`按1递减；`incrby key num`按指定数值递增；`decriby key num`按指定数值递减。
  3. `getrange key start end`获取指定区间的值；`setrange key start new_value`设置置顶区间范围的值，从开始下标替换新值长度的新值。
  4. `setex key seconds value`设置时指定超时时间；`setnx key value`当不存在时设值，存在时则无效
  5. `mset key1 val1 key2 val2 ...`批量设值；`mget key1 key2 ...`批量获取；`msetnx key1 val1 key2 val2 ...`当有一个不存在时，则该命令不生效
##List类型
* List类型为单值多value，类似于java中的List链表，但它是双向列表，两边都可以插入且效率都极高。
* 相关常用操作：
1. `lpush key val1 val2 ...`设置一个list，从左边插入，对应的右边插入有`rpush`，利用该特性可以将list作为堆栈使用；`lrange key start end`遍历一个list，其中索引支持负数反向。
2. `lpop key`从左边移除一个元素并返回，对应的有`rpop`。
3. `lindex key index`按照索引下标获取元素；`llen key`获取list长度
4. `lrem key num value`删除指定数量的value值的元素；`ltrim key start end`截取指定范围内的元素列表（边界均包含），并赋值给该key；
5. `rpoplpush key1 key2`将源列表的一个元素出栈并向目标列表入栈；`lset key index value`将列表指定位置的值替换；`linsert key before/after value new_value` 在指定列表的指定value之前/之后插入新值






